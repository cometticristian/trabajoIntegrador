<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %>

<head>
   <link rel="stylesheet" href="/stylesheets/loginRegister.css">

</head>

<body>
   <%- include('../partials/headerNav') %>



   <div class="container">
      <div class="row">

         <div class="col-12 col-md-6 offset-3 columna">
            <div class="formulario">
               <h1>EDITAR PERFIL</h1>
               <!--<HR style="height:1px;border-width:0;color:gray;background-color:gray"></HR>-->

               <section class="log-reg">
                              
                  <% function buscarError(name){
                  //console.log("buscarError");
                  if(typeof errors != 'undefined'){
                        let error = errors.filter(function(error){
                           return error.param == name;
                        });
                        //console.log(errors);
                        if(error.length == 0){
                           let error = [{
                           value: '',
                           msg: '',
                           param: '',
                           location: ''
                        }
                        ];
                        //console.log(error);
                        return error;
                        }
                        return error;
                  }else{
                        let error = [{
                           value: '',
                           msg: '',
                           param: '',
                           location: ''
                        }
                        ];
                        //console.log(error);
                        return error;
                  }
               }
               %>
                  <form action="/users/edit?_method=PUT" method="POST" enctype="multipart/form-data">
                     <label for="firstName">
                        <h3>Nombre (*):</h3>
                     </label>
                     <input class="input" type="text" required id="firstName" name="firstName" value="<%= (typeof datos != 'undefined') ? datos.firstName : user[0].firstName  %>">
                     <span style="color: red;font-size: 12px;"><%= buscarError('first_name')[0].msg %></span>
                     <label for="last_name">
                        <h3>Apellido (*):</h3>
                     </label>
                     <input class="input" type="text" required id="lastName" name="lastName" value="<%= (typeof datos != 'undefined') ? datos.lastName : user[0].lastName %>">
                     <span style="color: red;font-size: 12px;"><%= buscarError('last_name')[0].msg %></span>
                     <label for="email">
                        <h3>Email (*):</h3>
                     </label>
                     <input class="input" type="email" required id="email" name="email" value="<%= (typeof datos != 'undefined') ? datos.email : user[0].email  %>">
                     <span style="color: red;font-size: 12px;"><%= buscarError('email')[0].msg %></span>
                     <label for="phone">
                        <h3>Telefono:</h3>
                     </label>
                     <input class="input" type="tel" required id="phone" name="phone" value="<%= (typeof datos != 'undefined') ? datos.phone : user[0].phone  %>">
                     <span style="color: red;font-size: 12px;"><%= buscarError('phone')[0].msg %></span>
                     <label for="password">
                        <h3>Contraseña (*):</h3>
                     </label>
                     <input class="input" type="password" required id="password" name="password" value="">
                     <span style="color: red;font-size: 12px;"><%= buscarError('password')[0].msg %></span>
                     <label for="passwordConfirm">
                        <h3>Confirmar contraseña (*):</h3>
                     </label>
                     <input class="input" type="password" required id="passwordConfirm" name="passwordConfirm">
                     <span style="color: red;font-size: 12px;"><%= buscarError('passwordConfirm')[0].msg %></span>
                     <label for="avatar">
                        <h3>Imágen de perfil:</h3>
                     </label>
                     <input class="input" type="file" name="avatar">
                     <span style="color: red;font-size: 12px;"><%= buscarError('avatar')[0].msg %></span>
                     <div class="align"><input class="btn-login black" type="submit" value="GUARDAR CAMBIOS"></div>
                  </form>

               </section>
            </div>
         </div>
      </div>
   </div>





   <%- include('../partials/footer') %>
</body>

</html>